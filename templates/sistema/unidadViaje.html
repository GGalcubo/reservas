{% load static %}
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="es">
    <!--<![endif]-->
    {% include "sistema/cabecera.html" %}
    <link href="{% static 'css/viajeStyle.css' %}" rel="stylesheet" type="text/css" />
    <!-- <link href="{% static 'css/select2.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/select2-bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/jquery.fancybox.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/bootstrap-fileinput.min.css' %}" rel="stylesheet" type="text/css" /> -->
    <style>
        .tabbable-line > .tab-content {
                padding: 10px 0!important;
        }
        .disabled-select {
           background-color:#d5d5d5;
           opacity:0.5;
           border-radius:3px;
           cursor:not-allowed;
           position:absolute;
           top:0;
           bottom:0;
           right:0;
           left:0;
        }
    </style>
    <body id="viajes" class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-reversed page-sidebar-fixed page-md">
    {% include "sistema/barra_top.html" %}
        <div class="page-container">

            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <div class="page-bar">
                        <ul class="page-breadcrumb">
                            <li>
                                <i class="icon-home"></i>
                                <a href="/sistema/operaciones/">Operaciones</a>
                                <i class="fa fa-angle-right"></i>
                            </li>
                            <li>
                                <span>Viaje</span>
                            </li>
                        </ul>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="portlet light ">
                                <div class="portlet-title">
                                    <div class="caption font-green" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                        <span class="caption-subject bold uppercase mg-b-5 mg-r-20" id="viaje_titulo"><i class="icon-rocket font-green mg-r-5"></i>Datos del Viaje {{ id }}</span>
                                    </div>
                                    <div class="tools"></div>
                                </div>
                                <div class="portlet-body">
                                    <div class="row flex mg-b-10">
                                        <div class="col-xs-4 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="fecha" value="{{fecha}}" name="fecha" readonly="readonly">
                                                <label for="fecha">Fecha</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-4 col-sm-1 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="hora" value="{{hora}}" name="hora" readonly="readonly">
                                                <label for="hora">Hora</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-4 col-sm-1 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="hora_estimada" value="{{estimados}}" name="hora_estimada" readonly="readonly">
                                                <label for="hora_estimada">Est.</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="estado" value="{{estado}}" name="estado" readonly="readonly">
                                                <label for="estado">Estado</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="categoria" value="{{categoria_viaje}}" name="categoria" readonly="readonly">
                                                <label for="categoria">Cat. Viaje</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <textarea class="form-control" rows="2" placeholder="" name="comentario_chofer" id="comentario_chofer" readonly="readonly">{{comentario}}</textarea>
                                                <label for="comentario_chofer">Comentario</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row flex mg-b-10">
                                        <div class="col-xs-9 col-sm-5 col-md-5">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="pasajero" value="{{v.getPasajerosConcats}}" name="pasajero" readonly="readonly">
                                                <label for="pasajero">Pasajero</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-3 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cantidad" value="{{cantidad}}" name="cantidad" readonly="readonly">
                                                <label for="cantidad">Cant.</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-5 col-md-5">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente" value="{{cliente}}" name="cliente" readonly="readonly">
                                                <label for="cliente">Cliente</label>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row flex mg-b-10">

                                        <div class="col-xs-12">
                                            <!-- BEGIN SAMPLE FORM PORTLET-->
                                            <div class="portlet light ">
                                                <div class="portlet-title">
                                                    <div class="caption font-blue">
                                                        <span class="caption-subject bold uppercase">Proveedor</span>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input has-success form-md-floating-label">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" id="admin_total_proveedor" name="admin_total_proveedor" readonly="true">
                                                                <label for="admin_total_proveedor" class="pd-l-0">TOTAL</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" id="admin_costo_proveedor" name="admin_costo_proveedor" value="" readonly="true">
                                                                <label for="admin_costo_proveedor">Costo Proveedor</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="admin_cant_espera_proveedor" name="admin_cant_espera_proveedor" disabled>
                                                                <option value="0" selected="selected">Elegir tiempo</option>
                                                                    <option value="15">00:15 hs</option>
                                                                    <option value="30">00:30 hs</option>
                                                                    <option value="45">00:45 hs</option>
                                                                    <option value="60">01:00 hs</option>
                                                                    <option value="75">01:15 hs</option>
                                                                    <option value="90">01:30 hs</option>
                                                                    <option value="105">01:45 hs</option>
                                                                    <option value="120">02:00 hs</option>
                                                                    <option value="135">02:15 hs</option>
                                                                    <option value="150">02:30 hs</option>
                                                                    <option value="165">02:45 hs</option>
                                                                    <option value="180">3:00 hs</option>
                                                                    <option value="195">3:15 hs</option>
                                                                    <option value="210">3:30 hs</option>
                                                                    <option value="225">3:45 hs</option>
                                                                    <option value="240">4:00 hs</option>
                                                                    <option value="255">4:15 hs</option>
                                                                    <option value="270">4:30 hs</option>
                                                                    <option value="285">4:45 hs</option>
                                                                    <option value="300">5:00 hs</option>
                                                                    <option value="315">5:15 hs</option>
                                                                    <option value="330">5:30 hs</option>
                                                                    <option value="345">5:45 hs</option>
                                                                    <option value="360">6:00 hs</option>
                                                                    <option value="375">6:15 hs</option>
                                                                    <option value="390">6:30 hs</option>
                                                                    <option value="405">6:45 hs</option>
                                                                    <option value="420">7:00 hs</option>
                                                                    <option value="435">7:15 hs</option>
                                                                    <option value="450">7:30 hs</option>
                                                                    <option value="465">7:45 hs</option>
                                                                    <option value="480">8:00 hs</option>
                                                                    <option value="495">8:15 hs</option>
                                                                    <option value="510">8:30 hs</option>
                                                                    <option value="525">8:45 hs</option>
                                                                    <option value="540">9:00 hs</option>
                                                                    <option value="555">9:15 hs</option>
                                                                    <option value="570">9:30 hs</option>
                                                                    <option value="585">9:45 hs</option>
                                                                    <option value="600">10:00 hs</option>
                                                            </select>
                                                            <label for="admin_cant_espera_proveedor" class="">Espera</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_espera_proveedor" name="admin_espera_proveedor" readonly="true">
                                                                <label for="admin_espera_proveedor">Espera</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="admin_cant_hs_dispo_proveedor" name="admin_cant_hs_dispo_proveedor" disabled>
                                                                <option value="0" selected="selected">Elegir cant.</option>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                                <option value="5">5</option>
                                                                <option value="6">6</option>
                                                                <option value="7">7</option>
                                                                <option value="8">8</option>
                                                                <option value="9">9</option>
                                                                <option value="10">10</option>
                                                                <option value="11">11</option>
                                                                <option value="12">12</option>
                                                                <option value="13">13</option>
                                                                <option value="14">14</option>
                                                                <option value="15">15</option>
                                                                <option value="16">16</option>
                                                                <option value="17">17</option>
                                                                <option value="18">18</option>
                                                                <option value="19">19</option>
                                                                <option value="20">20</option>
                                                                <option value="21">21</option>
                                                                <option value="22">22</option>
                                                                <option value="23">23</option>
                                                                <option value="24">24</option>
                                                            </select>
                                                            <label for="admin_cant_hs_dispo_proveedor" class="">Horas Disp</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_hs_dispo_proveedor" name="admin_hs_dispo_proveedor" readonly="true">
                                                                <label for="admin_hs_dispo_proveedor">Horas Disp</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_peaje_proveedor" name="admin_peaje_proveedor" readonly="true">
                                                                <label for="admin_peaje_proveedor">Peajes</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_estacionamiento_proveedor" name="admin_estacionamiento_proveedor" readonly="true">
                                                                <label for="admin_estacionamiento_proveedor">Parking</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_otros_proveedor" name="admin_otros_proveedor" readonly="true">
                                                                <label for="admin_otros_proveedor">Otros</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="admin_cant_maletas_proveedor" name="admin_cant_maletas_proveedor" disabled>
                                                                <option value="0">Elegir cant.</option>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                                <option value="5">5</option>
                                                                <option value="6">6</option>
                                                                <option value="7">7</option>
                                                                <option value="8">8</option>
                                                                <option value="9">9</option>
                                                                <option value="10">10</option>
                                                            </select>
                                                            <label for="admin_cant_maletas_proveedor" class="">Maletas</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2">
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_costo_maletas_proveedor" name="admin_costo_maletas_proveedor" readonly="true">
                                                                <label for="admin_costo_maletas_proveedor">Maletas</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-md-2 flex flex-row">
                                                        <div class="form-group form-md-checkboxes">
                                                            <div class="md-checkbox-inline">
                                                                <div class="md-checkbox">
                                                                    <input type="checkbox" id="admin_bilingue_proveedor" class="md-check" name="admin_bilingue_proveedor" readonly="true">
                                                                    <label for="admin_bilingue_proveedor">
                                                                        <span></span>
                                                                        <span class="check"></span>
                                                                        <span class="box"></span></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group form-md-line-input">
                                                            <div class="input-group left-addon right-addon">
                                                                <span class="input-group-addon">$</span>
                                                                <input type="text" class="form-control" value="" id="admin_costo_bilingue_proveedor" name="admin_costo_bilingue_proveedor" readonly="true">
                                                                <label for="admin_costo_bilingue_proveedor">Bilingüe</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- END SAMPLE FORM PORTLET-->
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row flex align-i-center mg-t-10">
                                        <div class="col-xs-12 col-sm-6">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="origenConcat" value="{{desde}}" name="origenConcat" readonly="readonly">
                                                <label for="origenConcat" class="font-blue"><b>DESDE</b></label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-6">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control font-bold" id="destinoConcat" value="{{hasta}}" name="destinoConcat" readonly="readonly">
                                                <label for="destinoConcat" class="font-blue"><b>HASTA</b></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ACA PONDRÍA UN if QUE SI NO HAY TRAMOS NO MUESTRE NI LA TABLA NI NADA SOBRE LOS TRAMOS -->
                                    <div class="row mg-t-10">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="portlet light ">
                                                        <div class="portlet-title">
                                                            <div class="caption font-blue" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                                                <i class="icon-notebook font-blue"></i>
                                                                <span class="caption-subject bold uppercase mg-b-5 mg-r-20">Tramos</span>
                                                            </div>
                                                            <div class="tools"> </div>
                                                        </div>
                                                        <div class="portlet-body">
                                                            <div id="grillaTramos" class="table-responsive">
                                                                <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaTramos">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="all">ID</th>
                                                                            <th class="all">Origen</th>
                                                                            <th class="all">Destino</th>
                                                                            <th class="all">Pasajero</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for t in trayectos %}
                                                                            {% if t.id != trayectos.0.id %}
                                                                                <tr>
                                                                                    <td>{{ t.id }}</td>
                                                                                    <td>{{ t.desdeConcat }}</td>
                                                                                    <td>{{ t.hastaConcat }}</td>
                                                                                    <td>{{ t.pasajero|default_if_none:'' }}</td>
                                                                                </tr>
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="portlet light ">
                                                <div class="portlet-title">
                                                    <div class="caption font-blue" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                                        <i class="icon-notebook font-blue"></i>
                                                        <span class="caption-subject bold uppercase mg-b-5 mg-r-20">Adjuntos</span>
                                                    </div>
                                                    <div class="tools"> </div>
                                                </div>
                                                <div class="portlet-body">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaAdjuntosViajes">
                                                            <thead>
                                                                <tr>
                                                                    <th class="all">Acciones</th>
                                                                    <th class="all">Adjunto</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for adjuntoviaje in adjuntos %}
                                                                <tr>
                                                                    <td class="text-center">
                                                                        <a href="/media/{{adjuntoviaje.adjunto.upload}}" target="_blank" class="btn btn-xs btn-outline blue"><i class="fa fa-download"></i>Descargar</a>
                                                                    </td>
                                                                    <td>{{ adjuntoviaje.adjunto.upload }}</td>
                                                                </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
            <!-- BEGIN QUICK SIDEBAR -->
            <!-- END QUICK SIDEBAR -->
        </div>
        <!-- END CONTAINER -->

        <div id="prueba"></div>

        {% include "sistema/footer.html" %}
        <!-- SCRIPTS PROPIOS DE ESTA VISTA -->
        <!-- {#<script src="{% static 'js/select2.full.min.js' %}" type="text/javascript"></script>#} -->
        <!-- <script src="{% static 'js/components-date-time-pickers.min.js' %}" type="text/javascript"></script> -->
        <!-- <script src="{% static 'js/bootstrap-fileinput.min.js' %}" type="text/javascript"></script> -->
        <!-- BEGIN FILE INPUT -->
        <!--<script src="{% static 'js/jquery.fancybox.pack.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.ui.widget.js' %}" type="text/javascript"></script>

        <script src="{% static 'js/tmpl.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/load-image.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/canvas-to-blob.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.blueimp-gallery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.iframe-transport.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-process.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-image.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-audio.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-video.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-validate.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-ui.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/form-fileupload.min.js' %}" type="text/javascript"></script>-->
        <!-- END FILE INPUT -->

        <script>
            var getUrlParameter = function getUrlParameter(sParam) {
                var sPageURL = window.location.search.substring(1),
                    sURLVariables = sPageURL.split('&'),
                    sParameterName,
                    i;

                for (i = 0; i < sURLVariables.length; i++) {
                    sParameterName = sURLVariables[i].split('=');

                    if (sParameterName[0] === sParam) {
                        return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                    }
                }
            };
            let idViaje = getUrlParameter('idViaje');
            if(idViaje === undefined){
                $(document).prop('title', 'Nuevo viaje - Central LT');
            } else {
                $(document).prop('title', 'Viaje '+ idViaje+' - Central LT');   
            }

            $(document).ready(function(){
                $('#tablaTramos').DataTable( {
                    // scrollX: true,
                    // scrollCollapse: true,
                    responsive: true,
                    dom: 'rt',
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json'
                    }
                } );

                $('#tablaAdjuntosViajes').DataTable( {
                    // scrollX: true,
                    // scrollCollapse: true,
                    responsive: true,
                    dom: 'rt',
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json'
                    }
                } );
            });

            // var clientes = [];

            // var unidades = [];
            // {% for unidad in unidades %}
            //     var obj = {
            //         id : '{{ unidad.0 }}',
            //         id_fake : '{{ unidad.1 }}',
            //         identificacion:'{{ unidad.2 }}'};
            //     unidades.push(obj);
            // {% endfor %}

            // var tipo_observaciones = [];
            // {% for to in tipoobservacion %}
            //     var obj = {
            //         id : '{{ to.id }}',
            //         tipo_observacion : '{{ to.tipo_observacion }}',
            //         detalle_tipo_obs:'{{ to.detalle_tipo_obs|default_if_none:"" }}'};
            //     tipo_observaciones.push(obj);
            // {% endfor %}

            // var estados = [];
            // {% for estado in estados %}
            //     var obj = {
            //         id : '{{ estado.id }}',
            //         identificacion:'{{ estado.estado }}'};
            //     estados.push(obj);
            // {% endfor %}

            // var provincias = [];
            // {% for provincia in provincias %}
            //     var obj = {
            //         id : '{{ provincia.id }}',
            //         nombre:'{{ provincia.nombre }}'};
            //     provincias.push(obj);
            // {% endfor %}

            // var localidades = [];
            // {% for localidad in localidades %}
            //     var obj = {
            //         id : '{{ localidad.id }}',
            //         provincia : '{{ localidad.provincia }}',
            //         terminal_flag : '{{ localidad.terminal_flag }}',
            //         nombre:'{{ localidad.nombre }}'};
            //     localidades.push(obj);
            // {% endfor %}

            var viaje_items = [];
             {% for viaje_item in viaje.getViajeItems %}
                 var obj = {
                     id : '{{ viaje_item.id }}',
                     monto : '{{ viaje_item.monto }}',
                     monto_s_iva : '{{ viaje_item.monto_s_iva }}',
                     monto_iva : '{{ viaje_item.monto_iva }}',
                     tipo_items_viaje : '{{ viaje_item.tipo_items_viaje_id }}',
                     cant:'{{ viaje_item.cant }}'};
                 viaje_items.push(obj);
             {% endfor %}

            // var es_nuevo            = '{{ es_nuevo }}';
            // var mensaje             = '{{ mensaje }}';
            // var viaje               = '{{ viaje.id }}';
            // var estado              = '{{ viaje.estado.id }}';
            // var espera_viaje        = '{{ viaje.espera|default_if_none:"" }}';
            // var maletas_viaje       = '{{ viaje.maletas|default_if_none:"" }}';
            // var bilingue_viaje      = '{{ viaje.bilingue|default_if_none:"" }}';
            // var dispo_viaje         = '{{ viaje.dispo|default_if_none:"" }}';
            // var pasajero_cant       = '{{ viaje.nropasajeros|default_if_none:"" }}';
            // var solicitante         = '{{ viaje.solicitante.id }}';
            // var pasajero            = '{{ viaje.pasajero.id }}';
            // var centro_costo        = '{{ viaje.centro_costo.id }}';
            // var html_select         = '';

            // var cliente_id          = '{{ viaje.cliente.id|default_if_none:"" }}';
            // var cliente             = '';

            // var destino_desde_id    = '{{ viaje.getTrayectoPrincipal.destino_desde_id|default_if_none:"" }}';
            // var provincia_desde_id  = '{{ viaje.getTrayectoPrincipal.provincia_desde_id|default_if_none:"" }}';
            // var localidad_desde_id  = '{{ viaje.getTrayectoPrincipal.localidad_desde_id|default_if_none:"" }}';

            // var destino_hasta_id    = '{{ viaje.getTrayectoPrincipal.destino_hasta_id|default_if_none:"" }}';
            // var provincia_hasta_id  = '{{ viaje.getTrayectoPrincipal.provincia_hasta_id|default_if_none:"" }}';
            // var localidad_hasta_id  = '{{ viaje.getTrayectoPrincipal.localidad_hasta_id|default_if_none:"" }}';

            // var csrf_token          = '{{ csrf_token }}';
            // var uid                 = '{{ uid }}';


            // function exportarPdf( e, dt, node, config ){
            //     $("#formularioPdf").html('');
            //     $("#formularioPdf").html('<form id="dynForm" target="_blank" action="/sistema/exportarPdfViaje/" method="get">'+params+'</form>');
            //     $("#dynForm").submit();
            // }

            $('#admin_espera_cliente, #admin_estacionamiento_cliente, #admin_estacionamiento_cliente, #admin_peaje_cliente, #admin_hs_dispo_cliente, #admin_costo_cliente, #admin_costo_bilingue_cliente, #admin_costo_maletas_cliente, #admin_otros_cliente').on('input', function () {
                let sum_total = 0;
                sum_total += parseInt($('#admin_espera_cliente').val()) || 0;
                sum_total += parseInt($('#admin_estacionamiento_cliente').val()) || 0;
                sum_total += parseInt($('#admin_peaje_cliente').val()) || 0;
                sum_total += parseInt($('#admin_hs_dispo_cliente').val()) || 0;
                sum_total += parseInt($('#admin_costo_cliente').val()) || 0;
                sum_total += parseInt($('#admin_costo_bilingue_cliente').val()) || 0;
                sum_total += parseInt($('#admin_costo_maletas_cliente').val()) || 0;
                sum_total += parseInt($('#admin_otros_cliente').val()) || 0;

                $('#admin_total_cliente').val(sum_total);
            });

            $('#admin_espera_proveedor, #admin_estacionamiento_proveedor, #admin_estacionamiento_proveedor, #admin_peaje_proveedor, #admin_hs_dispo_proveedor, #admin_costo_proveedor, #admin_costo_bilingue_proveedor, #admin_costo_maletas_proveedor, #admin_otros_proveedor').on('input', function () {
                let sum_total = 0;
                sum_total += parseInt($('#admin_espera_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_estacionamiento_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_peaje_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_hs_dispo_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_costo_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_costo_bilingue_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_costo_maletas_proveedor').val()) || 0;
                sum_total += parseInt($('#admin_otros_proveedor').val()) || 0;

                $('#admin_total_proveedor').val(sum_total);
            });

            fillViajeItems = () => {
                let sum_total_proveedor = 0;
                let sum_total_cliente = 0;
                viaje_items.forEach(value => {
                    //console.log(value.monto_s_iva);
                    switch(value.tipo_items_viaje){
                        case '1':
                            $('#admin_espera_cliente').val(value.monto_s_iva);
                            $('#admin_cant_espera_cliente').val(value.cant);
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '2':
                            $('#admin_costo_cliente').val(parseFloat(value.monto_s_iva));
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '3':

                            if(value.cant == 1){
                                $('#admin_bilingue_cliente').prop('checked', true);
                            }
                            $('#admin_costo_bilingue_cliente').val(parseFloat(value.monto_s_iva));
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '4':
                            $('#admin_costo_maletas_cliente').val(parseFloat(value.monto_s_iva));
                            $('#admin_cant_maletas_cliente').val(value.cant);
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '5':
                            $('#admin_estacionamiento_cliente').val(parseFloat(value.monto_s_iva));
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '6':
                            $('#admin_peaje_cliente').val(parseFloat(value.monto_s_iva));
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '8':
                            $('#admin_costo_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '9':
                            if(value.cant == 1){
                                $('#admin_bilingue_proveedor').prop('checked', true);
                            }
                            $('#admin_costo_bilingue_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '10':
                            $('#admin_cant_maletas_proveedor').val(value.cant);
                            $('#admin_costo_maletas_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '11':
                            $('#admin_estacionamiento_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '12':
                            $('#importe_efectivo').val(parseFloat(value.monto_s_iva));
                        break;
                        case '13':
                            $('#admin_hs_dispo_proveedor').val(parseFloat(value.monto_s_iva));
                            $('#admin_cant_hs_dispo_proveedor').val(value.cant);
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '14':
                            $('#admin_espera_proveedor').val(value.monto_s_iva);
                            $('#admin_cant_espera_proveedor').val(value.cant);
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '15':
                            $('#admin_peaje_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '16':
                            $('#admin_otros_proveedor').val(parseFloat(value.monto_s_iva));
                            sum_total_proveedor += parseFloat(value.monto_s_iva);
                        break;
                        case '17':
                            $('#admin_otros_cliente').val(parseFloat(value.monto_s_iva));
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        case '18':
                            $('#admin_hs_dispo_cliente').val(parseFloat(value.monto_s_iva));
                            $('#admin_cant_hs_dispo_cliente').val(value.cant);
                            sum_total_cliente += parseFloat(value.monto_s_iva);
                        break;
                        default:
                    }
                });
                $('#admin_total_cliente').val(sum_total_cliente);
                $('#admin_total_proveedor').val(sum_total_proveedor);
            };
            fillViajeItems();
        </script>

        <!-- <script src="{% static 'js/viaje.js' %}" type="text/javascript"></script> -->

        {% include "sistema/template_upload.html" %}
    </body>
</html>