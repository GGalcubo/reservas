{% load static %}
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="es">
    <!--<![endif]-->
    {% include "sistema/cabecera.html" %}
    <link href="{% static 'css/viajeStyle.css' %}" rel="stylesheet" type="text/css" />
    <!-- <link href="{% static 'css/select2.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/select2-bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/jquery.fancybox.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/bootstrap-fileinput.min.css' %}" rel="stylesheet" type="text/css" /> -->
    <style>
        .tabbable-line > .tab-content {
                padding: 10px 0!important;
        }
        .disabled-select {
           background-color:#d5d5d5;
           opacity:0.5;
           border-radius:3px;
           cursor:not-allowed;
           position:absolute;
           top:0;
           bottom:0;
           right:0;
           left:0;
        }
    </style>
    <body id="viajes" class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-reversed page-sidebar-fixed page-md">
    {% include "sistema/barra_top.html" %}
        <div class="page-container">

            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <div class="page-bar">
                        <ul class="page-breadcrumb">
                            <li>
                                <i class="icon-home"></i>
                                <a href="/sistema/operaciones/">Operaciones</a>
                                <i class="fa fa-angle-right"></i>
                            </li>
                            <li>
                                <span>Viaje</span>
                            </li>
                        </ul>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="portlet light ">
                                <div class="portlet-title">
                                    <div class="caption font-green" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                        <span class="caption-subject bold uppercase mg-b-5 mg-r-20" id="viaje_titulo"><i class="icon-rocket font-green mg-r-5"></i>Datos del Viaje {{ id }}</span>
                                    </div>
                                    <div class="tools"></div>
                                </div>
                                <div class="portlet-body">
                                    <div class="row flex mg-b-10">
                                        <div class="col-xs-4 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="fecha" value="{{fecha}}" name="fecha" readonly="readonly">
                                                <label for="fecha">Fecha</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-4 col-sm-1 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="hora" value="{{hora}}" name="hora" readonly="readonly">
                                                <label for="hora">Hora</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-4 col-sm-1 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="hora_estimada" value="{{estimados}}" name="hora_estimada" readonly="readonly">
                                                <label for="hora_estimada">Est.</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="estado" value="{{estado}}" name="estado" readonly="readonly">
                                                <label for="estado">Estado</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="categoria" value="{{categoria_viaje}}" name="categoria" readonly="readonly">
                                                <label for="categoria">Cat. Viaje</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <textarea class="form-control" rows="3" placeholder="" name="comentario_chofer" id="comentario_chofer" readonly="readonly">{{comentario}}</textarea>
                                                <label for="comentario_chofer">Comentario</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row flex mg-b-10">
                                        <div class="col-xs-9 col-sm-5 col-md-5">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="pasajero" value="{{pasajero}}" name="pasajero" readonly="readonly">
                                                <label for="pasajero">Pasajero</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-3 col-sm-2 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cantidad" value="{{cantidad}}" name="cantidad" readonly="readonly">
                                                <label for="cantidad">Cant.</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-5 col-md-5">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente" value="{{cliente}}" name="cliente" readonly="readonly">
                                                <label for="cliente">Cliente</label>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row flex mg-b-10">
                                        <div class="col-xs-6 col-sm-3 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="tiempo_espera" value="{{espera}}" name="tiempo_espera" readonly="readonly">
                                                <label for="tiempo_espera">Espera</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="tiempo_hs_dispo" value="{{hs_dispo}}" name="tiempo_hs_dispo" readonly="readonly">
                                                <label for="tiempo_hs_dispo">Hs Disp.</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-2 col-md-2">
                                            <div class="form-group form-md-checkboxes">
                                                <div class="md-checkbox-inline">
                                                    <div class="md-checkbox">
                                                        <input type="checkbox" id="bilingue" class="md-check" name="bilingue" {% if bilingue %}checked{% endif %} disabled>
                                                        <label for="bilingue">
                                                            <span></span>
                                                            <span class="check"></span>
                                                            <span class="box"></span> Bilingue </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="maletas" value="{{maletas}}" name="maletas" readonly="readonly">
                                                <label for="maletas">Maletas</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="peaje" name="peaje" value="{{peajes}}" readonly="readonly">
                                                    <label for="peaje">Peajes</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3 col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="estacionamiento" name="estacionamiento" value="{{estacionamiento}}" readonly="readonly">
                                                    <label for="estacionamiento">Estacionamiento</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-3 col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="otros" name="otros" value="{{otros}}" readonly="readonly">
                                                    <label for="otros">Otros</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row flex align-i-center mg-t-10">
                                        <div class="col-xs-12 col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="origenConcat" value="{{desde}}" name="origenConcat" readonly="readonly">
                                                <label for="origenConcat">DESDE</label>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-md-6">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="destinoConcat" value="{{hasta}}" name="destinoConcat" readonly="readonly">
                                                <label for="destinoConcat">HASTA</label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ACA PONDRÍA UN if QUE SI NO HAY TRAMOS NO MUESTRE NI LA TABLA NI NADA SOBRE LOS TRAMOS -->
                                    <div class="row mg-t-10">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="portlet light ">
                                                        <div class="portlet-title">
                                                            <div class="caption font-blue" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                                                <i class="icon-notebook font-blue"></i>
                                                                <span class="caption-subject bold uppercase mg-b-5 mg-r-20">Tramos</span>
                                                            </div>
                                                            <div class="tools"> </div>
                                                        </div>
                                                        <div class="portlet-body">
                                                            <div id="grillaTramos">
                                                                <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaTramos">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="all">ID</th>
                                                                            <th class="all">Origen</th>
                                                                            <th class="all">Destino</th>
                                                                            <th class="all">Pasajero</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for t in trayectos %}
                                                                            {% if t.id != trayectos.0.id %}
                                                                                <tr>
                                                                                    <td>{{ t.id }}</td>
                                                                                    <td>{{ t.desdeConcat }}</td>
                                                                                    <td>{{ t.hastaConcat }}</td>
                                                                                    <td>{{ t.pasajero|default_if_none:'' }}</td>
                                                                                </tr>
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="portlet light ">
                                                <div class="portlet-title">
                                                    <div class="caption font-blue" style="display: flex; align-items: baseline; flex-flow: wrap;">
                                                        <i class="icon-notebook font-blue"></i>
                                                        <span class="caption-subject bold uppercase mg-b-5 mg-r-20">Adjuntos</span>
                                                    </div>
                                                    <div class="tools"> </div>
                                                </div>
                                                <div class="portlet-body">
                                                    <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaAdjuntosViajes">
                                                        <thead>
                                                            <tr>
                                                                <th class="all">Acciones</th>
                                                                <th class="all">Adjunto</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {% for adjuntoviaje in adjuntos %}
                                                            <tr>
                                                                <td class="text-center">
                                                                    <a href="/media/{{adjuntoviaje.adjunto.upload}}" target="_blank" class="btn btn-xs btn-outline blue"><i class="fa fa-download"></i>Descargar</a>
                                                                </td>
                                                                <td>{{ adjuntoviaje.adjunto.upload }}</td>
                                                            </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
            <!-- BEGIN QUICK SIDEBAR -->
            <!-- END QUICK SIDEBAR -->
        </div>
        <!-- END CONTAINER -->

        <div id="prueba"></div>

        {% include "sistema/footer.html" %}
        <!-- SCRIPTS PROPIOS DE ESTA VISTA -->
        <!-- {#<script src="{% static 'js/select2.full.min.js' %}" type="text/javascript"></script>#} -->
        <!-- <script src="{% static 'js/components-date-time-pickers.min.js' %}" type="text/javascript"></script> -->
        <!-- <script src="{% static 'js/bootstrap-fileinput.min.js' %}" type="text/javascript"></script> -->
        <!-- BEGIN FILE INPUT -->
        <!--<script src="{% static 'js/jquery.fancybox.pack.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.ui.widget.js' %}" type="text/javascript"></script>

        <script src="{% static 'js/tmpl.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/load-image.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/canvas-to-blob.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.blueimp-gallery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.iframe-transport.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-process.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-image.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-audio.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-video.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-validate.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.fileupload-ui.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/form-fileupload.min.js' %}" type="text/javascript"></script>-->
        <!-- END FILE INPUT -->

        <script>
            var getUrlParameter = function getUrlParameter(sParam) {
                var sPageURL = window.location.search.substring(1),
                    sURLVariables = sPageURL.split('&'),
                    sParameterName,
                    i;

                for (i = 0; i < sURLVariables.length; i++) {
                    sParameterName = sURLVariables[i].split('=');

                    if (sParameterName[0] === sParam) {
                        return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                    }
                }
            };
            let idViaje = getUrlParameter('idViaje');
            if(idViaje === undefined){
                $(document).prop('title', 'Nuevo viaje - Central LT');
            } else {
                $(document).prop('title', 'Viaje '+ idViaje+' - Central LT');   
            }

            $(document).ready(function(){
                $('#tablaTramos').DataTable( {
                    scrollX: true,
                    scrollCollapse: true,
                    responsive: true,
                    dom: 'rt',
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json'
                    }
                } );

                $('#tablaAdjuntosViajes').DataTable( {
                    scrollX: true,
                    scrollCollapse: true,
                    responsive: true,
                    dom: 'rt',
                    language: {
                        url: '//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json'
                    }
                } );
            });

            // var clientes = [];

            // var unidades = [];
            // {% for unidad in unidades %}
            //     var obj = {
            //         id : '{{ unidad.0 }}',
            //         id_fake : '{{ unidad.1 }}',
            //         identificacion:'{{ unidad.2 }}'};
            //     unidades.push(obj);
            // {% endfor %}

            // var tipo_observaciones = [];
            // {% for to in tipoobservacion %}
            //     var obj = {
            //         id : '{{ to.id }}',
            //         tipo_observacion : '{{ to.tipo_observacion }}',
            //         detalle_tipo_obs:'{{ to.detalle_tipo_obs|default_if_none:"" }}'};
            //     tipo_observaciones.push(obj);
            // {% endfor %}

            // var estados = [];
            // {% for estado in estados %}
            //     var obj = {
            //         id : '{{ estado.id }}',
            //         identificacion:'{{ estado.estado }}'};
            //     estados.push(obj);
            // {% endfor %}

            // var provincias = [];
            // {% for provincia in provincias %}
            //     var obj = {
            //         id : '{{ provincia.id }}',
            //         nombre:'{{ provincia.nombre }}'};
            //     provincias.push(obj);
            // {% endfor %}

            // var localidades = [];
            // {% for localidad in localidades %}
            //     var obj = {
            //         id : '{{ localidad.id }}',
            //         provincia : '{{ localidad.provincia }}',
            //         terminal_flag : '{{ localidad.terminal_flag }}',
            //         nombre:'{{ localidad.nombre }}'};
            //     localidades.push(obj);
            // {% endfor %}

            // var viaje_items = [];
            // {% for viaje_item in viaje.getViajeItems %}
            //     var obj = {
            //         id : '{{ viaje_item.id }}',
            //         monto : '{{ viaje_item.monto }}',
            //         monto_s_iva : '{{ viaje_item.monto_s_iva }}',
            //         monto_iva : '{{ viaje_item.monto_iva }}',
            //         tipo_items_viaje : '{{ viaje_item.tipo_items_viaje_id }}',
            //         cant:'{{ viaje_item.cant }}'};
            //     viaje_items.push(obj);
            // {% endfor %}

            // var es_nuevo            = '{{ es_nuevo }}';
            // var mensaje             = '{{ mensaje }}';
            // var viaje               = '{{ viaje.id }}';
            // var estado              = '{{ viaje.estado.id }}';
            // var espera_viaje        = '{{ viaje.espera|default_if_none:"" }}';
            // var maletas_viaje       = '{{ viaje.maletas|default_if_none:"" }}';
            // var bilingue_viaje      = '{{ viaje.bilingue|default_if_none:"" }}';
            // var dispo_viaje         = '{{ viaje.dispo|default_if_none:"" }}';
            // var pasajero_cant       = '{{ viaje.nropasajeros|default_if_none:"" }}';
            // var solicitante         = '{{ viaje.solicitante.id }}';
            // var pasajero            = '{{ viaje.pasajero.id }}';
            // var centro_costo        = '{{ viaje.centro_costo.id }}';
            // var html_select         = '';

            // var cliente_id          = '{{ viaje.cliente.id|default_if_none:"" }}';
            // var cliente             = '';

            // var destino_desde_id    = '{{ viaje.getTrayectoPrincipal.destino_desde_id|default_if_none:"" }}';
            // var provincia_desde_id  = '{{ viaje.getTrayectoPrincipal.provincia_desde_id|default_if_none:"" }}';
            // var localidad_desde_id  = '{{ viaje.getTrayectoPrincipal.localidad_desde_id|default_if_none:"" }}';

            // var destino_hasta_id    = '{{ viaje.getTrayectoPrincipal.destino_hasta_id|default_if_none:"" }}';
            // var provincia_hasta_id  = '{{ viaje.getTrayectoPrincipal.provincia_hasta_id|default_if_none:"" }}';
            // var localidad_hasta_id  = '{{ viaje.getTrayectoPrincipal.localidad_hasta_id|default_if_none:"" }}';

            // var csrf_token          = '{{ csrf_token }}';
            // var uid                 = '{{ uid }}';


            // function exportarPdf( e, dt, node, config ){
            //     $("#formularioPdf").html('');
            //     $("#formularioPdf").html('<form id="dynForm" target="_blank" action="/sistema/exportarPdfViaje/" method="get">'+params+'</form>');
            //     $("#dynForm").submit();
            // }

        </script>

        <!-- <script src="{% static 'js/viaje.js' %}" type="text/javascript"></script> -->

        {% include "sistema/template_upload.html" %}
    </body>
</html>