<table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaListadoFactClientes">
    <thead>
        <tr>
            <th class="all"></th>
            <th class="all">Fecha</th>
            <th class="all">Fecha</th>
            <th class="all">TS</th>
            <th class="all">Hora</th>
            <th class="all">Unidad</th>
            <th class="all">N° Serv</th>
            <th class="all">ID Aux</th>
            <th class="all">Proforma</th>
            <th class="all">Factura</th>
            <th class="all">Solicitante</th>
            <th class="all">Centro Costo</th>
            <th class="all">Pasajero</th>
            <th class="all">Origen</th>
            <th class="all">Destino</th>
            <th class="all">Hs Dispo</th>
            <th class="all">Dispo</th>
            <th class="all">Subtotal</th>
            <th class="all">P. Efect</th>
            <th class="all">T. Espera</th>
            <th class="all">Espera</th>
            <th class="all">Bilingue</th>
            <th class="all">Maletas</th>
            <th class="all">Peajes</th>
            <th class="all">Parking</th>
            <th class="all">Otros</th>
            <th class="all">Total</th>
            <th class="all">I.V.A.</th>
            <th class="all">Final</th>
            <th class="all">ID</th>
        </tr>
    </thead>
    <tbody>
        {% for v in viajes %}
        <tr id="rowid{{ v.id }}">
            <td></td>
            <td class="all">{{ v.getFecha }}</td>
            <td class="all"><span class='hide'>{{ v.fecha }}</span>{{ v.getFecha }}</td>
            <td>{{v.categoria_viaje}}</td>
            <td>{{v.hora}}</td>
            <td>{{v.unidad.identificacion}}</td>
            <td class="text-center"><a target="_blank" href="/sistema/editaViaje/?idViaje={{v.id}}">{{v.id}}</a></td>
            <td>{{v.nro_aux|default_if_none:""}}</td>
            <td>{{v.getProforma}}</td>
            <td>{{v.getFacturaCliente}}</td>
            <td>{{v.solicitante}}</td>
            <td>{{v.centro_costo.nombre|default_if_none:""}}</td>
            <td>{{v.pasajero|default_if_none:""}}</td>
            <td>{{v.getTrayectoPrincipal.desdeConcat}}</td>
            <td>{{v.getTrayectoPrincipal.hastaConcat}}</td>
            <td>{{v.getHsDispoCliente}}</td>
            <td>{{v.getMontoDispoClienteFormat}}</td>
            <td>{{v.getSubtotalClienteFormat}}</td>
            <td>{{v.getMontoPeftClienteFormat}}</td>
            <td>{{v.getCantidadTiempoEsperaCliente}}</td>
            <td>{{v.getMontoTiempoEsperaClienteFormat}}</td>
            <td>{{v.getMontoBilingueClienteFormat}}</td>
            <td>{{v.getMontoMontoClienteFormat}}</td>
            <td>{{v.getMontoPeajesClienteFormat}}</td>
            <td>{{v.getMontoEstacionClienteFormat}}</td>
            <td>{{v.getMontoOtrosClienteFormat}}</td>
            <td>{{v.getTotalClienteFormat}}</td>
            <td>{{v.getIvaClienteFormat}}</td>
            <td>{{v.getFinalClienteFormat}}</td>
            <td>{{v.id}}</td>
        </tr>
        {% endfor %}
    </tbody>
    <!-- ESTO SE AGREGO PARA LA FILA DE TOTAL -->
    <tfoot>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </tfoot>
    <!-- HASTA ACA -->
</table>
<script>
    $(document).ready(function(){
        let table = $('#tablaListadoFactClientes').DataTable( {
          ///////////////// EJEMPLO DE DATATABLES CON TABLE FOOTER PARA FILAS CON TOTAL /////////////
          /*
          Se puede usar esto que entiendo es una API de datatables o bien clavar una ultima fila y que algún
          método haga la magia de sumar los valores de las filas anteriores. Como diría Jelinek, lo dejo a tu
          criterio.
          */
          "footerCallback": function ( row, data, start, end, display ) {
              var api = this.api(), data;
   
              // Remove the formatting to get integer data for summation
              var intVal = function ( i ) {
                  return typeof i === 'string' ?
                      i.replace(/[\$,]/g, '')*1 :
                      typeof i === 'number' ?
                          i : 0;
              };
   
                // Total over all pages
                total15 = api.column( 15 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total16 = api.column( 16 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total17 = api.column( 17 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total18 = api.column( 18 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total19 = api.column( 19 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total20 = api.column( 20 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total21 = api.column( 21 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total22 = api.column( 22 ).data() .reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total23 = api.column( 23 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total24 = api.column( 24 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total25 = api.column( 25 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total26 = api.column( 26 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total27 = api.column( 27 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
                total28 = api.column( 28 ).data().reduce( function (a, b) {
                    parseado = parseFloat(a) + parseFloat(b);
                    return parseado.toFixed(2);
                }, 0 );
   
                // Update footer
                $( api.column( 15 ).footer() ).html(total15);
                $( api.column( 16 ).footer() ).html(total16);
                $( api.column( 17 ).footer() ).html(total17);
                $( api.column( 18 ).footer() ).html(total18);
                $( api.column( 19 ).footer() ).html(total19);
                $( api.column( 20 ).footer() ).html(total20);
                $( api.column( 21 ).footer() ).html(total21);
                $( api.column( 22 ).footer() ).html(total22);
                $( api.column( 23 ).footer() ).html(total23);
                $( api.column( 24 ).footer() ).html(total24);
                $( api.column( 25 ).footer() ).html(total25);
                $( api.column( 26 ).footer() ).html(total26);
                $( api.column( 27 ).footer() ).html(total27);
                $( api.column( 28 ).footer() ).html(total28);
          },
          //////////////// HASTA ACA HARDCODEADO EL TOTAL SEGUN EL EJEMPLO DE DATATABLES .replace(/\d(?=(\d{3})+\.)/g, '$&,')//////////////

          //////////////////// ESTO PARA QUE EL SCROLL ESTÉ DESPUÉS DEL FOOTER ////////////////////////
          "fnInitComplete": function(){
                // Disable TBODY scoll bars
                $('.dataTables_scrollBody').css({
                    'overflow': 'hidden',
                    'border': '0'
                });

                // Enable TFOOT scoll bars
                $('.dataTables_scrollFoot').css('overflow', 'auto');

                // Sync TFOOT scrolling with TBODY
                $('.dataTables_scrollFoot').on('scroll', function () {
                    $('.dataTables_scrollBody').scrollLeft($(this).scrollLeft());
                });                    
            },
            ////////////////////////////// HASTA ACA LO DEL FOOTER ///////////////////////////////////
            colReorder: true,
            responsive: true,
            scrollX: true,
            columnDefs: [ {
                orderable: false,
                className: 'select-checkbox',
                targets:   0
            },
            {
                targets: 29,
                visible: false,
                name: "ID"
            },
            {
                targets: 1,
                visible: false,
                name: "fecha"
            },
            {
                targets: 5,
                visible: false,
                name: "unidad"
            } ,
            {
                targets: 7,
                visible: false,
                name: "id_aux"
            },
            /*{
                targets: 9,
                visible: false,
                name: "factura"
            }*/],
            select: {
                style:    'os',
                selector: 'td:first-child'
            },
            order: [[ 2, "asc" ],[ 4, "asc" ]],
            dom: 'lfBrtip',
            buttons: [
                'selectAll',
                'selectNone',
                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        /*columns: ':visible:not(:eq(0))'*/
                        columns: [ 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28 ]
                    }
                },
                {
                    extend: 'excelHtml5',
                    footer: true,
                    exportOptions: {
                        /*columns: ':visible:not(:eq(0))'*/
                        columns: [ 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28 ]
                    }
                },
                /*{
                    extend: 'pdfHtml5',
                    orientation: 'landscape',
                    pageSize: 'TABLOID',
                    exportOptions: {
                        columns: [ 1, 3, 5, 6, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28 ]
                    },
                    customize: function(doc) {
                      doc.defaultStyle.fontSize = 8;
                   }  
                },*/
                {
                    text: 'PDF',
                    className: 'botonDelPDF',
                    action: function ( e, dt, node, config ) {
                        exportarPdf( e, dt, node, config );
                    }
                },
                {
                    extend: 'print',
                    messageTop: 'Facturación Provedores',
                    exportOptions: {
                        columns: ':visible:not(:eq(0))'
                    }
                }
            ],
            lengthMenu: [
                            [ 100, 50, 25, 10, -1 ],
                            [ '100', '50', '25', '10', 'Todos' ]
                        ],
            pageLength: 25,
            language: {
                url: '//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json',
                buttons: {
                    copy: "Copiar",
                    print: "Imprimir",
                    selectAll: "Seleccionar Todo",
                    selectNone: "Deseleccionar"
                }
            },
            fixedHeader: {
                    header: true,
                    headerOffset: $('.page-header-inner').outerHeight()
            }
        } );
    });
</script>