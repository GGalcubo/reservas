{% load static %}
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->

<link href="{% static 'css/select2.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'css/select2-bootstrap.min.css' %}" rel="stylesheet" type="text/css" />

<style>
    .tabbable-line > .tab-content {
            padding: 10px 0!important;
    }
    .disabled-select {
       background-color:#d5d5d5;
       opacity:0.5;
       border-radius:3px;
       cursor:not-allowed;
       position:absolute;
       top:0;
       bottom:0;
       right:0;
       left:0;
    }
</style>
<html lang="en">
<!--<![endif]-->
{% include "sistema/cabecera.html" %}
<body id="viajes" class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-reversed page-sidebar-fixed page-md">
{% include "sistema/barra_top.html" %}
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    {% include "sistema/barra_lat.html" %}
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- BEGIN PAGE HEADER-->
            <!-- END PAGE HEADER-->
            <div class="row">
                <div class="col-md-12">
                    <!-- BEGIN EXAMPLE TABLE PORTLET-->

                    <div id="viajeValidacion" class="alert alert-danger">
                        <button class="close" data-close="alert"></button>
                        <div></div> <div id="mensajeValidacion" ></div>
                    </div>
                    <div class="portlet light ">
                        <div class="portlet-title">
                            <div class="caption font-green">
                                <i class="icon-rocket font-green"></i>
                                <span class="caption-subject bold uppercase">Ingreso del Cliente y Datos del Viaje</span>
                            </div>
                            <div class="tools"></div>
                        </div>
                        <div class="portlet-body">
                            <form role="form" class="form-viaje-viaje" id="form-viaje-viaje" method="post" action="/sistema/guardarViaje/">{% csrf_token %}
                                <div class="form-body">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <select class="form-control select2me" id="id_cliente" name="id_cliente">
                                                    {% for c in clientes %}
                                                       <option value="{{ c.id }}">{{ c.id }}</option>
                                                    {% endfor %}
                                                </select>
                                                <label>ID Cliente</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group form-md-line-input">
                                                <select class="form-control select2me" id="razon_social">
                                                    {% for c in clientes %}
                                                       <option value="{{ c.id }}">{{ c.razon_social }}</option>
                                                    {% endfor %}
                                                </select>
                                                <label>Razón Social</label>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente_tel" value="1212" readonly>
                                                <label>Teléfono</label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente_direccion" value="Balcarce 510 CAP. FED." readonly>
                                                <label>Dirección</label>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente_factura" value="CTA.CTE." name="cliente_factura" readonly>
                                                <label>C. Fact.</label>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="cliente_categoria" value="A" name="cliente_categoria" readonly>
                                                <label>Categ.</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control" id="solicitante" name="solicitante"></select>
                                                        <label>Solicitante</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control" id="centro_costos" name="centro_costos">
                                                        </select>
                                                        <label>Centro de Costos</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control" id="pasajero" name="pasajero"></select>
                                                        <label>Pasajero</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <input type="text" class="form-control" id="fecha" value="06/4/2018" name="fecha">
                                                        <label>Fecha</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <input type="text" class="form-control" id="hora" value="23:30" name="hora">
                                                        <label>Hora</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control" id="categoria_viaje" name="categoria_viaje">
                                                            {% for cv in categoria_viajes %}
                                                               <option value="{{ cv.id }}">{{ cv.categoria }}</option>
                                                            {% endfor %}
                                                        </select>
                                                        <label>C. Viaje</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control select2me" name="estado" id="estado">
                                                            {% for e in estados %}
                                                               <option value="{{ e.id }}">{{ e.estado }}</option>
                                                            {% endfor %}
                                                        </select>
                                                        <label>Estado</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <div class="input-group left-addon right-addon">
                                                            <span class="input-group-addon">$</span>
                                                            <input type="text" class="form-control" id="costo_provedor" name="costo_provedor" >
                                                            <label for="form_control_1">Costo Provedor</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input">
                                                        <div class="input-group left-addon right-addon">
                                                            <span class="input-group-addon">$</span>
                                                            <input type="text" class="form-control"  id="tarifa_pasada" name="tarifa_pasada" >
                                                            <label for="form_control_1">Tarifa pasada</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control select2me" id="unidad_id" name="unidad_id">
                                                            {% for u in unidades %}
                                                               <option value="{{ u.id }}">{{ u.id }}</option>
                                                            {% endfor %}
                                                        </select>
                                                        <label>ID Unidad</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group form-md-line-input">
                                                        <select class="form-control select2me" id="unidad_identificacion">
                                                            {% for u in unidades %}
                                                               <option value="{{ u.id }}">{{ u.identificacion }}</option>
                                                            {% endfor %}
                                                        </select>
                                                        <label>Unidad</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group form-md-line-input">
                                                        <textarea class="form-control" rows="3" placeholder="" name="comentario_chofer" id="comentario_chofer"></textarea>
                                                        <label>Comentario para el chofer</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <input type="text" class="form-control" id="espera" value="15 min" name="espera">
                                                <label>Espera</label>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="peaje" value="100" name="peaje">
                                                    <label for="form_control_1">Peajes</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="estacionamiento" value="100" name="estacionamiento">
                                                    <label for="form_control_1">Estacionamiento</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-line-input">
                                                <div class="input-group left-addon right-addon">
                                                    <span class="input-group-addon">$</span>
                                                    <input type="text" class="form-control" id="otros" value="100" name="otros">
                                                    <label for="form_control_1">Otros</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group form-md-checkboxes">
                                            <div class="md-checkbox-inline">
                                                <div class="md-checkbox">
                                                    <input type="checkbox" id="maletas" class="md-check" name="maletas">
                                                    <label for="maletas">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span> Maletas </label>
                                                </div>
                                                <div class="md-checkbox">
                                                    <input type="checkbox" id="bilingue" class="md-check" name="bilingue">
                                                    <label for="bilingue">
                                                        <span></span>
                                                        <span class="check"></span>
                                                        <span class="box"></span> Bilingue </label>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                        <div class="col-md-2">
                                            <span class="input-group-btn btn">
                                                <button class="btn green-haze" type="submit">OK</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- END EXAMPLE TABLE PORTLET-->
                </div>
                <div class="col-md-12">
                    <!-- BEGIN EXAMPLE TABLE PORTLET-->
                    <div class="portlet light" id="viaje-tab">
                        <div class="portlet-body">
                            <div class="tabbable-line">
                                <ul class="nav nav-tabs ">
                                    <li class="active">
                                        <a href="#tab_15_1" data-toggle="tab" aria-expanded="true"> Viaje </a>
                                    </li>
                                    <li class="">
                                        <a href="#tab_15_2" data-toggle="tab" aria-expanded="false"> Observaciones</a>
                                    </li>
                                    <li class="">
                                        <a href="#tab_15_3" data-toggle="tab" aria-expanded="false"> Administración </a>
                                    </li>
                                    <li class="">
                                        <a href="#tab_15_4" data-toggle="tab" aria-expanded="false"> Historial </a>
                                    </li>
                                    <li class="">
                                        <a href="#tab_15_5" data-toggle="tab" aria-expanded="false"> Pasajeros </a>
                                    </li>
                                    <li class="">
                                        <a href="#tab_15_6" data-toggle="tab" aria-expanded="false"> Adjuntos </a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab_15_1">
                                        <form role="form" class="form-viaje-trayecto" id="form-viaje-trayecto" method="post">{% csrf_token %}
                                            <div class="form-body">
                                                <div class="row" style="margin-top: 50px;">
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="caption font-green" style="margin:0 auto;margin-bottom: 30px;text-align: center">
                                                                    <span class="caption-subject bold uppercase" style="font-size: 16px">Desde</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Destino</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Localidad</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Calle</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <input type="text" class="form-control" id=""
                                                                           value="">
                                                                    <label>Altura</label>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <input type="text" class="form-control" id=""
                                                                           value="">
                                                                    <label>Entre</label>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="caption font-green" style="margin:0 auto;margin-bottom: 30px;text-align: center">
                                                                    <span class="caption-subject bold uppercase" style="font-size: 16px">Hasta</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Destino</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Localidad</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <select class="form-control" id="">
                                                                        <option value=""></option>
                                                                        <option value="1">Interior</option>
                                                                        <option value="2">Option 2</option>
                                                                        <option value="3">Option 3</option>
                                                                        <option value="4">Option 4</option>
                                                                    </select>
                                                                    <label>Calle</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <input type="text" class="form-control" id=""
                                                                           value="">
                                                                    <label>Altura</label>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <input type="text" class="form-control" id=""
                                                                           value="">
                                                                    <label>Entre</label>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div style="width:158px;margin:0 auto;padding-top: 40px;">
                                                            <span class="input-group-btn btn">
                                                                <a data-toggle="modal" class="btn blue" href="#add_tramo">Agregar Tramo</a>
                                                            </span>
                                                        </div>
                                                        <!-- /.modal -->
                                                        <div id="add_tramo" class="modal fade" tabindex="-1" aria-hidden="true">
                                                            <div class="modal-dialog">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                                        <h4 class="modal-title" style="color:#888;">Agregar Tramo</h4>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="scroller" style="height:300px" data-always-visible="1" data-rail-visible1="1">
                                                                            <div class="row">
                                                                                <div class="col-md-6">
                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <div class="caption font-green" style="margin:0 auto;margin-bottom: 30px;text-align: center">
                                                                                                <span class="caption-subject bold uppercase" style="font-size: 16px">Desde</span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Destino</label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Localidad</label>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Calle</label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <input type="text" class="form-control" id=""
                                                                                                       value="">
                                                                                                <label>Altura</label>

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <input type="text" class="form-control" id=""
                                                                                                       value="">
                                                                                                <label>Entre</label>

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <div class="caption font-green" style="margin:0 auto;margin-bottom: 30px;text-align: center">
                                                                                                <span class="caption-subject bold uppercase" style="font-size: 16px">Hasta</span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Destino</label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Localidad</label>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <select class="form-control" id="">
                                                                                                    <option value=""></option>
                                                                                                    <option value="1">Interior</option>
                                                                                                    <option value="2">Option 2</option>
                                                                                                    <option value="3">Option 3</option>
                                                                                                    <option value="4">Option 4</option>
                                                                                                </select>
                                                                                                <label>Calle</label>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <input type="text" class="form-control" id=""
                                                                                                       value="">
                                                                                                <label>Altura</label>

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row">
                                                                                        <div class="col-md-6">
                                                                                            <div class="form-group form-md-line-input">
                                                                                                <input type="text" class="form-control" id=""
                                                                                                       value="">
                                                                                                <label>Entre</label>

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" data-dismiss="modal" class="btn dark btn-outline">Cerrar</button>
                                                                        <button type="button" class="btn green">Agregar</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12" style="margin-top: 20px">
                                                        <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaClientes">
                                                            <thead>
                                                                <tr>
                                                                    <th class="all">Ver</th>
                                                                    <th class="min-tablet">Desde destino</th>
                                                                    <th class="min-phone-l">Desde localidad</th>
                                                                    <th class="desktop">Hasta destino</th>
                                                                    <th class="min-tablet">Hasta localidad</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr>
                                                                    <td class="text-center"><a href=""><i class="fa fa-bullseye"></i></a></td>
                                                                    <td>Capital Federal</td>
                                                                    <td>Palermo</td>
                                                                    <td>Capital Federal</td>
                                                                    <td>Villa del Parque</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-bottom: 30px">
                                                    <div class="col-md-12">
                                                        <span class="input-group-btn btn">
                                                            <button class="btn green-haze" type="submit">Guardar Viaje y Tramos</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                        </form>
                                    </div>
                                    <div class="tab-pane" id="tab_15_2">
                                        <form role="form" class="form-viaje-observacion">
                                            <div class="form-body">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="">
                                                                <option value=""></option>
                                                                <option value="1" selected="selected">Terminales -IN</option>
                                                                <option value="2">Terminales -OUT</option>
                                                                <option value="3">Dispo</option>
                                                                <option value="4">Viaje con espera</option>
                                                                <option value="4">Viaje no tarifado</option>
                                                            </select>
                                                            <label>Tipo de viaje</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group form-md-line-input">
                                                            <select class="form-control" id="">
                                                                <option value=""></option>
                                                                <option value="1" selected="selected">Aterrizó</option>
                                                                <option value="2">Contactó</option>
                                                                <option value="3">Salió</option>
                                                                <option value="4">Otro</option>
                                                            </select>
                                                            <label>Detalle</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group form-md-line-input">
                                                            <input type="text" class="form-control" id="" value="23:30">
                                                            <label>Hora</label>

                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group form-md-line-input">
                                                            <textarea class="form-control" rows="3"
                                                                      placeholder=""></textarea>
                                                            <label>Comentario</label>

                                                        </div>
                                                        <div class="form-group form-md-line-input">
                                                            <button type="button" class="btn blue">Agregar Observación</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        <div class="caption font-green" style="margin:0 auto;margin-bottom: 30px;text-align: center">
                                            <span class="caption-subject bold uppercase" style="font-size: 16px">Observaciones</span>
                                        </div>
                                        <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="tablaClientes">
                                            <thead>
                                                <tr>
                                                    <th class="all">Editar</th>
                                                    <th class="min-tablet">Tipo</th>
                                                    <th class="min-phone-l">Detalle</th>
                                                    <th class="desktop">Hora</th>
                                                    <th class="min-tablet">Comentario</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="text-center"><a href=""><i class="fa fa-pencil"></i></a></td>
                                                    <td>Dispo</td>
                                                    <td>Llegó</td>
                                                    <td>12:00 hs</td>
                                                    <td>hubo demora por paro de docentes</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-center"><a href=""><i class="fa fa-pencil"></i></a></td>
                                                    <td>Dispo</td>
                                                    <td>Llegó</td>
                                                    <td>12:00 hs</td>
                                                    <td>hubo demora por paro de docentes</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="tab-pane" id="tab_15_3">
                                        <p> Administración</p>
                                    </div>
                                    <div class="tab-pane" id="tab_15_4">
                                        <p> Historial</p>
                                        </p>
                                    </div>
                                    <div class="tab-pane" id="tab_15_5">
                                        <p> Pasajeros</p>
                                        </p>
                                    </div>
                                    <div class="tab-pane" id="tab_15_6">
                                        <p> Adjuntos</p>
                                        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- END EXAMPLE TABLE PORTLET-->

                </div>
            </div>

        </div>
        <!-- END CONTENT BODY -->
    </div>
    <!-- END CONTENT -->
    <!-- BEGIN QUICK SIDEBAR -->
    <!-- END QUICK SIDEBAR -->
</div>
<!-- END CONTAINER -->
{% include "sistema/footer.html" %}
<!-- SCRIPTS PROPIOS DE ESTA VISTA -->
<script src="{% static 'js/select2.full.min.js' %}" type="text/javascript"></script>

<script>

    var clientes = [];
    {% for cliente in clientes %}
        var centro_costos = [{% for cc in cliente.centrocosto_set.all %}
        { "id" : "{{ cc.id }}",
           "nombre" : "{{ cc.nombre }}"
        },
        {% endfor %}
        ];
        var personascliente = [{% for personacliente in cliente.personacliente_set.all %}
        { "id" : "{{ personacliente.persona.id }}",
           "nombre" : "{{ personacliente.persona.nombre}}",
           "tipo_persona" : "{{ personacliente.persona.tipo_persona}}"
        },
        {% endfor %}
        ];

        var obj = {
            id : {{ cliente.id }},
            razon_social:'{{ cliente.razon_social }}',
            direccion:'{{ cliente.calle }} {{ cliente.altura }} {{ cliente.piso }} {{ cliente.depto }}',
            categoria_id:'{{ cliente.categoria.categoria }}',
            telefono:'{{ cliente.telefonoPrincipal }}',
            centro_costos: centro_costos,
            personascliente: personascliente};
        clientes.push(obj);
    {% endfor %}

    var unidades = [];
    {% for unidad in unidades %}
        var obj = {
            id : {{ unidad.id }},
            identificacion:'{{ unidad.identificacion }}'};
        unidades.push(obj);
    {% endfor %}

    var estados = [];
    {% for estado in estados %}
        var obj = {
            id : {{ estado.id }},
            identificacion:'{{ estado.estado }}'};
        estados.push(obj);
    {% endfor %}

    var categoria_viajes = [];
    {% for categoria_viaje in categoria_viajes %}
        var obj = {
            id : {{ categoria_viaje.id }},
            codigo : {{ categoria_viaje.codigo }},
            categoria:'{{ categoria_viaje.categoria }}'};
        categoria_viajes.push(obj);
    {% endfor %}

    var es_nuevo = {{ es_nuevo }};

    function mostrarMsgValidacion(msg){
        $("#mensajeValidacion").html(msg);
        $("#viajeValidacion").show();
        $('html, body').animate({
            scrollTop: $("#viajeValidacion").offset().top - 100
          }, 100);
        return false;
    }

    function updateFillsByCliente(name, evt){
        var option_selected = evt.params.data.id - 1;
        $('#id_cliente').select2('val',clientes[option_selected].id);
        $('#razon_social').select2('val',clientes[option_selected].id);
        $('#id_cliente').val(clientes[option_selected].id).trigger("change");
        $('#razon_social').val(clientes[option_selected].id).trigger("change");
        $('#cliente_direccion').val(clientes[option_selected].direccion);
        $('#cliente_categoria').val(clientes[option_selected].categoria_id);
        $('#cliente_tel').val(clientes[option_selected].telefono);

        $('#centro_costos').empty();
        $('#solicitante').empty();
        $('#pasajero').empty();

        $.each(clientes[option_selected].centro_costos, function(i, value) {
          $('#centro_costos').append($('<option>').text(value.nombre).attr('value', value.id));
        });
        $.each(clientes[option_selected].personascliente, function(i, value) {
            if(value.tipo_persona == 'Solicitante'){
                $('#solicitante').append($('<option>').text(value.nombre).attr('value', value.id));
            }
        });
        $.each(clientes[option_selected].personascliente, function(i, value) {
            if(value.tipo_persona == 'Pasajeros'){
                $('#pasajero').append($('<option>').text(value.nombre).attr('value', value.id));
            }
        });
    }

    function updateFillsByUnidad(name, evt){
        var option_selected = evt.params.data.id - 1;
        $('#unidad_id').select2('val',unidades[option_selected].id);
        $('#unidad_identificacion').select2('val',unidades[option_selected].id);
        $('#unidad_id').val(clientes[option_selected].id).trigger("change");
        $('#unidad_identificacion').val(clientes[option_selected].id).trigger("change");
    }

    $(document).ready(function () {
        $("#viaje-tab").hide();
        $("#mensajeValidacion").html("");
        $("#viajeValidacion").hide();

        if(es_nuevo ==1){
            $('#estado').attr("disabled", true);
        }

        var cliente_inicial = clientes[0];
        var evt = {};
        evt.params = {};
        evt.params.data = {};
        evt.params.data.id = 1;

        updateFillsByCliente('', evt);

        $("#id_cliente").on("select2:select", function (e) { updateFillsByCliente("select2:select", e); });
        $("#razon_social").on("select2:select", function (e) { updateFillsByCliente("select2:select", e); });
        $("#unidad_id").on("select2:select", function (e) { updateFillsByUnidad("select2:select", e); });
        $("#unidad_identificacion").on("select2:select", function (e) { updateFillsByUnidad("select2:select", e); });

        $("#form-viaje-viaje").submit(function(e) {
            //TODO AGREGAR ERRORES EN CAMPOS
            if ($("#estado").val() == ""){
                mostrarMsgValidacion("El campo estado es obligatorio.");
                return false;
            }

            var obj               = {};
            obj.estado            = $("#estado").val();
            obj.cliente           = $("#id_cliente").val();
            obj.solicitante       = $("#solicitante").val();
            obj.centro_costos     = $("#centro_costos").val();
            obj.pasajero          = $("#pasajero").val();
            obj.fecha             = $("#fecha").val();
            obj.hora              = $("#hora").val();
            obj.costo_provedor    = $("#costo_provedor").val();
            obj.tarifa_pasada     = $("#tarifa_pasada").val();
            obj.comentario_chofer = $("#comentario_chofer").val();
            obj.unidad            = $("#unidad_id").val();
            obj.espera            = $("#espera").val();
            obj.peaje             = $("#peaje").val();
            obj.otros             = $("#otros").val();
            obj.estacionamiento   = $("#estacionamiento").val();
            obj.categoria_viaje   = $("#categoria_viaje").val();
            obj.maletas           = $("#maletas").val();
            obj.bilingue          = $("#bilingue").val();


            var url = "/sistema/guardarViaje/"; // the script where you handle the form input.
            $.ajax({
                   type: "POST",
                   url: url,
                   headers: {'X-CSRFToken': '{{ csrf_token }}'},
                   data: obj, // serializes the form's elements.
                   success: function(data)
                   {
                       $("#viaje-tab").show();
                       //alert(data); // show response from the php script.
                   }
                 });

            e.preventDefault(); // avoid to execute the actual submit of the form.
        });
    });
</script>
</body>

</html>